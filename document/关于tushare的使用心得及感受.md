# Tushare的使用心得及感受

> 2022年8月6日 Written By Rain

这篇文章是于今天在使用tushare的过程中有感而发下写的一点心得以及感受，谈谈tushare的优点和缺点，是否该通过收费的方式来获得一定程度盈利，以及我个人对tushare的一点点期许和能提供的一些帮助。

PS 文章仅代表个人看法和使用感受，力求实事求是

## 关于Tushare的讨论

### 优点

如果对论述过程不感兴趣可以直接跳到<a href="#conclusion">结论部分</a>

#### 1.1高速的获取速度&简单的代码要求

开门见山的说，在中国这个网络环境下，获得美国的股票，难如登天。我自己可以用实际情况对大家做一说明：

首先要获得一份完整地美国的股票列表需要如下操作：

![image-20220806140823393](C:\Users\Rain\AppData\Roaming\Typora\typora-user-images\image-20220806140823393.png)

并且不断地重复，选择完全部的股票。最终的结果中还可能出现很多的问题，比如这个股票是否已经退市，但是还是存在于这个数据库中。最终获得这个完整列表的时间大概是120-200分钟，当然这个是一劳永逸的结果，很长时间内无需更新了。（但是我想没有人的最终目的是获得一个完整的美股列表）

之后下一步我们要遍历这个列表，获得他的历史交易记录，我是用的是yfinance，运行的时候必须全程保持全局科学上网不能间断（了解的朋友应该知道这一点有多么的蛋疼），这运行的时间是大概需要30-40小时（全部的历史记录）

![image-20220806141527561](C:\Users\Rain\AppData\Roaming\Typora\typora-user-images\image-20220806141527561.png)

虽然后面我了解到Python性能的局限性，以及一些提高性能的方法，但是这些都有些杯水车薪，很难从根本解决问题。

如果你的目的是分析美股的历史数据，那么到这里应该已经足够了，但是如果你需要天天更新数据，并且不想每天耗费电脑非常麻烦的跑着程序，还不太了解程序和数据库，不太会用服务器，不想每天折腾的话……那么tushare的便捷性，一定可以让你满意。如果你不相信，我们来做下面这样的一个对比，我们将比较个人使用yfinance，和使用tushare的条件下，获得相同的10个美股的时间：

![image-20220806143258739](C:\Users\Rain\AppData\Roaming\Typora\typora-user-images\image-20220806143258739.png)

嗯……非常尴尬！因为这个时候我还没有开通权限是试用期，那么我们测两个，来看看平均时间意思意思：

**使用yfinance**

![image-20220806144107238](C:\Users\Rain\AppData\Roaming\Typora\typora-user-images\image-20220806144107238.png)

通过对比可以看出，与自己开梯子和tushare比较起来速度真的是天差地别，而且从代码逻辑来看，tushare可以省掉很多没有没有必要的逻辑（因为yfinance得到的数据还需要一些后续处理，需要懂更多的代码，特别是Python和Pandas库）。

#### 1.2 丰富的数据接口&清晰的接口逻辑

随着对股票的深入了解，简单的价格并不再能满足判断标准的需要，更多的开始关注例如财务数据中的每股利润，市盈率等。而且对于需要因子的量化分析师，越多的数据接口意味着更多挖掘的可能性，同期对比tushare和国内其它的类似api，tushare具有着最清晰的接口逻辑和最丰富的数据内容。

对于一款产品，能否立刻告知使用者如何使用是能否普及的关键。tushare在这一点上无疑是做的无可挑剔的，其所提供的doc，可以让算是经济外行的我迅速找到自己想要的内容，这一点我认为十分可贵。对于内容有着非常清晰的分级，保证了种类多样的同时还能做到让人一目了然：

<img src="C:\Users\Rain\AppData\Roaming\Typora\typora-user-images\image-20220806170305402.png" alt="image-20220806170305402" style="zoom: 50%;" />

#### 1.3 快速的更新迭代&准确的开发方向

活力永远是一个程序最重要的部分，上面我们说了tushare对于一个美股交易者的优势

### 缺点

#### 2.1 数据格式不足

至今我还是不太明白为什么tushare的数据格式是从现在到从前的，这种格式十分不利于数据库的更新

![image-20220806182502590](C:\Users\Rain\AppData\Roaming\Typora\typora-user-images\image-20220806182502590.png)

虽然一行

```python
df = df.loc[::-1]
```

可以搞定，但是意见总归是要提的，虽然我觉得tushare可能有自己的考量，但是我还是坚持获取的数据应该从古到今，这样不仅利于`ta-lib`的使用，对于存储数据库的存取更加方便。

#### 2.2 美股数据种类不足

美股和

### <span id="conclusion">结论</span>

TuShare的优点很明显，简单的代码逻辑使得CV战士可以迅速使用，快速的获取速度使得美股的分析都可以在统一的网络环境下进行（这个可以说是最打动我的地方了），以及目前对比来看最丰富的接口种类和最清晰的接口逻辑，让人一目了然，不会找不到自己想要的东西。以及最让人可喜的地方，是这个产品仍然具有着鲜活的生命力，不断再力求创新去探索更多的领域（如争议性很大的加密货币），这也意味着是真的有一批时刻关注市场的人再不断打磨这个产品。

很多人在互联网的使用过程中，往往对于外国的产品有种天然的青睐，而觉得中国做出的一些代码不靠谱。比如我自己早期在数据可视化的过程中，往往选择matplotlib、plotly，最后才想到用pyechart，但是有些打脸的是，pyechart在k线图绘制的最终呈现的结果上是碾压性地战胜了前两者，当然pyechart仍然存在不少缺陷，后续地开发和改进也有些不足。但是这些也瑕不掩瑜，至少证明了中国的程序和代码比起美国的不落什么下风。Tushare也正是一款用诚意打动人的产品，几年的不断经营完善使得这款产品真正做到了优秀的品质，绝对值得一试。

### 值不值得买？

该不该收费呢？我的回答是：**应该**。用心打磨的一款产品，有什么不收费的理由呢？很多非程序员的朋友，可能接受到的理念就是Github上的开源、免费……但是实际上外国收费的程序已经是比比皆是，如CCXT的pro版本，而且收取的费用可以说对于一个学生非常之高。一个程序的开源非常简单，谁是抱着挣钱！挣钱！挣钱！的目的来开发程序的呢？开发、公布代码，开源免费，引起大家的欢呼围观是每一个程序员的梦想，但是后续的运行、维护、更新迭代……无一不是需要时间和精力的。我想如果一个程序员开始就以盈利为目的，这个程序可能会早早倒在未盈利的考验中。大多数的程序在制作过程中并非一帆风顺的，这一点我想能引起大多数程序员的共鸣，大众看到的往往是一款产品，但是其中的每一个优化、开发到运维的成本都是非常之高，特别是对于一款数据为主的产品，需要性能更佳的服务器满足其庞大的访问频次和吞吐量，这些都是实打实的真金白银。如果这点不能说服您，在富途牛牛的美股板块如果要获得行情的收费是：

![image-20220806174840509](C:\Users\Rain\AppData\Roaming\Typora\typora-user-images\image-20220806174840509.png)

所以看到这里我第一时间是害怕tushare涨价……（tushare你最近可千万别涨价啊）

Tushare对于免费的用户已经开放了很多的接口，如果您的的确确需要其它数据，那么享受其方便性同时为其交费，或为其贡献一份力，不仅体现您对他人劳动的尊重，更是体现了您自身对于创作者的保护。

## 关于Tushare的改进建议

### 加密货币

参考了[解析：tushare 数字货币接口 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/29333347) 这篇文章，得知tushare的加密货币已经

## 四个数据集分享

